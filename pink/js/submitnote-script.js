"use strict";var ESC_KEYCODE=27,popups=document.querySelectorAll(".popup__form"),popupSuccess=document.querySelector(".popup__form--success"),popupFail=document.querySelector(".popup__form--fail"),closerBtns=document.querySelectorAll(".popup__btn"),form=document.querySelector(".feedback__form"),input=document.querySelector(".feedback__field"),openMessage=function(e){e.classList.add("popup__form--shown")},closeMessage=function(e){e.forEach(function(e){e.classList.remove("popup__form--shown")})},onError=function(){event.preventDefault(),openMessage(popupFail),document.removeEventListener("submit",onSubmit)},onSubmit=function(){event.preventDefault(),openMessage(popupSuccess),document.removeEventListener("submit",onError),form.reset()},onClickCloser=function(){event.preventDefault(),closeMessage(popups),document.removeEventListener("click",onClickCloser)},onEscCloser=function(){event.keyCode===ESC_KEYCODE&&closeMessage(popups)};input.addEventListener("invalid",onError),form.addEventListener("submit",onSubmit),closerBtns.forEach(function(e){e.addEventListener("click",onClickCloser)}),document.addEventListener("keydown",onEscCloser);